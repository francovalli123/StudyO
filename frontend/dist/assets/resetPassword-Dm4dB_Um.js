import"./modulepreload-polyfill-B5Qt9EMX.js";import{i as h,q as v,v as I}from"./auth-gate-B8HnkSQA.js";import"./responsive-CpSWI5uT.js";h();const c=document.getElementById("resetPasswordForm"),l=document.getElementById("email"),w=document.getElementById("password"),s=document.getElementById("statusMessage"),E=new URLSearchParams(window.location.search),d=E.get("token")||"",i=E.get("email")||"";l&&i&&(l.value=i);async function B(){if(!(!d||!i||!s))try{await I(i,d)}catch{s.textContent="El enlace es inválido o expiró.",s.classList.add("error"),c&&c.querySelectorAll("input, button").forEach(t=>t.disabled=!0)}}c&&l&&w&&s&&c.addEventListener("submit",async e=>{e.preventDefault(),s.textContent="",s.classList.remove("error");const t=l.value.trim(),n=w.value;if(!t||!d||!n){s.textContent="Completá todos los campos.",s.classList.add("error");return}try{await v(t,d,n),s.textContent="Contraseña actualizada. Redirigiendo al login...",setTimeout(()=>{window.location.href="/login"},1200)}catch(o){s.textContent=o?.message||"No se pudo restablecer la contraseña.",s.classList.add("error")}});B();const C=document.getElementById("resetPasswordForm"),m=document.getElementById("password"),f=document.getElementById("passwordConfirm"),b=document.getElementById("rule-length"),L=document.getElementById("rule-uppercase"),x=document.getElementById("rule-number"),P=document.getElementById("rule-match"),a=document.getElementById("errorMessage"),u=document.getElementById("successMessage");function p(){const e=m.value,t=f.value,n=e.length>=8,o=/[A-Z]/.test(e),g=/[0-9]/.test(e),y=e&&t&&e===t;return r(b,n),r(L,o),r(x,g),r(P,y),n&&o&&g&&y}function r(e,t){e.textContent=e.textContent.replace(/^✔️|❌/,t?"✔️":"❌"),e.style.color=t?"green":"red"}m.addEventListener("input",p);f.addEventListener("input",p);C.addEventListener("submit",async e=>{if(e.preventDefault(),a.style.display="none",u.style.display="none",!p()){a.textContent="La contraseña no cumple los requisitos.",a.style.display="block";return}const t=document.getElementById("email").value,n=m.value;try{await resetPassword(t,n),u.textContent="Contraseña actualizada correctamente. Redirigiendo...",u.style.display="block",setTimeout(()=>{window.location.href="/login"},1500)}catch(o){a.textContent=o.message||"Error al restablecer la contraseña.",a.style.display="block"}});
